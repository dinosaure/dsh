OASISFormat:             0.4
Name:                    dscheme
Version:                 0.1
Synopsis:                Typed Scheme
Authors:                 Romain Calascibetta
License:                 MIT
Plugins:                 META (0.4), DevFiles (0.4)
BuildTools:              ocamlbuild

Library dsh
  Path:                  src
  Modules:               Location, Lexer, Parser, Ast, Type, Gamma, Synthesis,
                         Core, Interpreter
  BuildDepends:          batteries

Executable dsh
  Path:                  bin
  MainIs:                dsh.ml
  BuildDepends:          dsh

## Test ##

Executable test_parser
  Path:                  test
  Build$:                flag(tests)
  Install:               false
  CompiledObject:        best
  MainIs:                parser_test.ml
  BuildDepends:          dsh, oUnit

Test test_parser
  Run$:                  flag(tests)
  TestTools:             test_parser
  Command:               $test_parser
  WorkingDirectory:      .

Executable test_lexer
  Path:                  test
  Build$:                flag(tests)
  Install:               false
  CompiledObject:        best
  MainIs:                lexer_test.ml
  BuildDepends:          dsh, oUnit

Test test_lexer
  Run$:                  flag(tests)
  TestTools:             test_lexer
  Command:               $test_lexer
  WorkingDirectory:      .

Executable test_type
  Path:                  test
  Build$:                flag(tests)
  Install:               false
  CompiledObject:        best
  MainIs:                type_test.ml
  BuildDepends:          dsh, oUnit

Test test_type
  Run$:                  flag(tests)
  TestTools:             test_type
  Command:               $test_type
  WorkingDirectory:      .

Executable test_alias
  Path:                  test
  Build$:                flag(tests)
  Install:               false
  CompiledObject:        best
  MainIs:                alias_test.ml
  BuildDepends:          dsh, oUnit

Test test_alias
  Run$:                  flag(tests)
  TestTools:             test_alias
  Command:               $test_alias
  WorkingDirectory:      .
